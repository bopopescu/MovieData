<!DOCTYPE html>
<html lang="en">
    <head>
        <title>connect to aws</title>
        <script src="jquery.min.js"></script>
		<script src="https://sdk.amazonaws.com/js/aws-sdk-2.0.0-rc.14.min.js"></script>
		<script src='Chart.min.js'></script>
    </head>


<body>
<h1>:)</h1>

<script type="text/javascript">
  // See the Configuring section to configure credentials in the SDK
        AWS.config.accessKeyId = 'AKIAJNZBFEQORVJAIXNA';
        AWS.config.secretAccessKey = 'uZiqn0kZEAmjMxiFOcaby4G2a+IgO1VKJTOxw92U';

		  // Configure your region
		  AWS.config.region = 'us-west-2';

</script>

<div id="status"></div>
<ul id="objects"></ul>
<canvas id="Genre" width="600" height="400"></canvas>


 <script type="text/javascript">
 var bucket = new AWS.S3({params: {Bucket: 'blackjack-movieminer'}});

 var params = {
  Bucket: 'blackjack-movieminer', // required
  Key: 'RottenTomatoes/Output/genre_analysis.json' ,// required
  // IfMatch: 'STRING_VALUE',
  // IfModifiedSince: new Date || 'Wed Dec 31 1969 16:00:00 GMT-0800 (PST)' || 123456789,
  // IfNoneMatch: 'STRING_VALUE',
  // IfUnmodifiedSince: new Date || 'Wed Dec 31 1969 16:00:00 GMT-0800 (PST)' || 123456789,
  // Range: 'STRING_VALUE',
  // ResponseCacheControl: 'STRING_VALUE',
  // ResponseContentDisposition: 'STRING_VALUE',
  // ResponseContentEncoding: 'STRING_VALUE',
  // ResponseContentLanguage: 'STRING_VALUE',
  // ResponseContentType: 'STRING_VALUE',
  // ResponseExpires: new Date || 'Wed Dec 31 1969 16:00:00 GMT-0800 (PST)' || 123456789,
  // VersionId: 'STRING_VALUE',
};
var response = 1;
response =bucket.getObject(params, function(err, data) {
  if (err) {
  console.log(err, err.stack); 
   document.getElementById('status').innerHTML =
       'Could not load objects from S3';
  }// an error occurred
  else{
      // successful response

       //document.getElementById('status').innerHTML =
       //data.Body.toString();
       obj = jQuery.parseJSON(data.Body.toString());
       console.log(obj);
       //display_title = obj.results[0].display_title;

    
	var GenreData = [
    {
        value: obj.Comedy,
        color:"#F38630"
    },
    {
        value : obj.Drama,
        color : "#E0E4CC"
    },
    {
        value : obj.Romance,
        color : "#69D2E7"
    },
    {
    	value : obj.Horror,
    	color : "#69D2E7"
    },
    {
    	value : obj.Animation,
    	color : "#69D2E7"
    },
    {
    	value : obj['Action & Adventure'],
    	color : "#69D2E7"
    },
    {
    	value : obj['Kids & Family'],
    	color : "#69D2E7"
    },
    {
    	value : obj['Mystery & Suspense'],
    	color : "#69D2E7"
    },
    {
    	value : obj['Science Fiction & Fantasy'],
    	color : "#69D2E7"
    },
    {
    	value : obj['Classics'],
    	color : "#69D2E7"
    },
    {
    	value : obj['Art House & International'],
    	color : "#69D2E7"
    },
    {
    	value : obj['Documentary'],
    	color : "#69D2E7"
    },
    {
    	value : obj['Television'],
    	color : "#69D2E7"
    },
    {
    	value : obj['Special Interest'],
    	color : "#69D2E7"
    },
    {
    	value : obj['Western'],
    	color : "#69D2E7"
    },
    {
    	value : obj['Musical & Performing Arts'],
    	color : "#69D2E7"
    },
    {
    	value : obj['Sports & Fitness'],
    	color : "#69D2E7"
    },
    {
    	value : obj['Cult Movies'],
    	color : "#69D2E7"
    }
]

    var Genre = document.getElementById('Genre').getContext('2d');
    new Chart(Genre).Pie(GenreData);



  }
});


  // bucket.listObjects(function (err, data) {
  //   if (err) {
  //     document.getElementById('status').innerHTML =
  //       'Could not load objects from S3';
  //   } else {
  //     document.getElementById('status').innerHTML =
  //       'Loaded ' + data.Contents.length + ' items from S3';
  //     for (var i = 0; i < data.Contents.length; i++) {
  //       document.getElementById('objects').innerHTML +=
  //         '<li>' + data.Contents[i].Key + '</li>';
  //     }
  //   }
  // });
// </script>

</body>
</html>